- if ENV['RECAPTCHA_ENABLED'] == 'true'
  %script(src='https://www.google.com/recaptcha/api.js?render=#{ENV['RECAPTCHA_SITE_KEY']}')
  :javascript
    grecaptcha.ready(() => {
      grecaptcha.execute('#{ENV['RECAPTCHA_SITE_KEY']}', { action: 'login' })
      .then(t => {
        r = document.createElement('textarea');
        r.setAttribute('name', 'g-recaptcha-response');
        r.setAttribute('style', 'display: none');
        r.innerText = t;
        e = document.getElementById('new_user') || document.getElementById('edit_user')
        e.appendChild(r);
        document.getElementsByName('button')[0].removeAttribute('disabled');
      });
    });
